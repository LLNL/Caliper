<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Caliper services &#8212; Caliper 2.12.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/classic.css?v=2bf1fcf8" />
    
    <script src="_static/documentation_options.js?v=20401a9d"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="The CalQL query language" href="calql.html" />
    <link rel="prev" title="Architecture and workflow" href="workflow.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="calql.html" title="The CalQL query language"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="workflow.html" title="Architecture and workflow"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Caliper 2.12.1 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Caliper services</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="caliper-services">
<h1>Caliper services<a class="headerlink" href="#caliper-services" title="Link to this heading">¶</a></h1>
<p>Caliper comes with a number of optional modules (<em>services</em>) that
provide measurement data or processing and data recording
capabilities. The flexible combination and configuration of these
services allows you to quickly assemble recording solutions for a wide
range of usage scenarios.</p>
<p>You can enable the services required for your measurement with the
<code class="docutils literal notranslate"><span class="pre">CALI_SERVICES_ENABLE</span></code> configuration variable, e.g.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">CALI_SERVICES_ENABLE</span><span class="o">=</span><span class="n">event</span><span class="p">,</span><span class="n">recorder</span><span class="p">,</span><span class="n">trace</span>
</pre></div>
</div>
<p>to create event-triggered context traces for an application.</p>
<p>You can use <cite>cali-query –help=services</cite> to list all available services,
and <cite>cali-query –help &lt;service name&gt;</cite> to list the options for a given
service:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cali-query --help event
event service:
 Trigger snapshots for Caliper region begin and end events
  CALI_EVENT_TRIGGER (stringlist)
   List of attributes that trigger measurements (optional)
  CALI_EVENT_ENABLE_SNAPSHOT_INFO=True (bool)
   If true, add begin/end attributes at each event. Increases overhead.
  CALI_EVENT_INCLUDE_REGIONS (string)
   Region filter to specify regions that will trigger snapshots
  CALI_EVENT_EXCLUDE_REGIONS (string)
   Region filter to specify regions that won&#39;t trigger snapshots
</pre></div>
</div>
<p>The following sections describe the available service modules and
their configuration.</p>
<section id="aggregate">
<span id="aggregate-service"></span><h2>Aggregate<a class="headerlink" href="#aggregate" title="Link to this heading">¶</a></h2>
<p>The <cite>aggregate</cite> service accumulates aggregation attributes (e.g., time
durations) of snapshots with a similar <cite>key</cite>, creating a profile.</p>
<dl>
<dt>CALI_AGGREGATE_KEY</dt><dd><p>Colon-separated list of attributes that form the aggregation key
(see below).</p>
<p>Default: Empty (all attributes without the <code class="docutils literal notranslate"><span class="pre">ASVALUE</span></code> storage
property are key attributes).</p>
</dd>
</dl>
<section id="aggregation-key">
<h3>Aggregation key<a class="headerlink" href="#aggregation-key" title="Link to this heading">¶</a></h3>
<p>The aggregation key defines for which attributes separate (aggregate)
snapshot records will be kept. That is, the aggregate service will
generate an aggregate snapshot record for each unique combination of
key values found in the input snapshots.  The values of the
aggregation attributes in the input snapshots will be accumulated and
appended to the aggregate snapshot.  The aggregate snapshot records
also include a <cite>count</cite> attribute that indicates how many
input snapshots with the given aggregation key were found. Attributes
that are neither aggregation attributes nor part of the aggregation
key will not appear in the aggregate snapshot records.</p>
<p>As an example, consider the following program:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;caliper/Annotation.h&gt;</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">foo</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">cali</span><span class="o">::</span><span class="n">Annotation</span><span class="o">::</span><span class="n">Guard</span>
<span class="w">      </span><span class="n">g</span><span class="p">(</span><span class="w"> </span><span class="n">cali</span><span class="o">::</span><span class="n">Annotation</span><span class="p">(</span><span class="s">&quot;function&quot;</span><span class="p">).</span><span class="n">begin</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>

<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="c1">// &quot;A&quot; loop</span>
<span class="w">    </span><span class="n">cali</span><span class="o">::</span><span class="n">Annotation</span><span class="o">::</span><span class="n">Guard</span>
<span class="w">      </span><span class="n">g</span><span class="p">(</span><span class="w"> </span><span class="n">cali</span><span class="o">::</span><span class="n">Annotation</span><span class="p">(</span><span class="s">&quot;loop.id&quot;</span><span class="p">).</span><span class="n">begin</span><span class="p">(</span><span class="s">&quot;A&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">cali</span><span class="o">::</span><span class="n">Annotation</span><span class="p">(</span><span class="s">&quot;iteration&quot;</span><span class="p">).</span><span class="n">set</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>

<span class="w">        </span><span class="n">foo</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">        </span><span class="n">foo</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="p">{</span><span class="w"> </span><span class="c1">// &quot;B&quot; loop</span>
<span class="w">    </span><span class="n">cali</span><span class="o">::</span><span class="n">Annotation</span><span class="o">::</span><span class="n">Guard</span>
<span class="w">      </span><span class="n">g</span><span class="p">(</span><span class="w"> </span><span class="n">cali</span><span class="o">::</span><span class="n">Annotation</span><span class="p">(</span><span class="s">&quot;loop.id&quot;</span><span class="p">).</span><span class="n">begin</span><span class="p">(</span><span class="s">&quot;B&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">cali</span><span class="o">::</span><span class="n">Annotation</span><span class="p">(</span><span class="s">&quot;iteration&quot;</span><span class="p">).</span><span class="n">set</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>

<span class="w">        </span><span class="n">foo</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Assuming snapshots are generated from the <cite>function</cite> annotation and
the aggregation key contains the <cite>function</cite>, <cite>loop.id</cite>, and
<cite>iteration</cite> attributes, the <cite>aggregate</cite> service will generate the
following aggregate snapshots :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">loop</span><span class="o">.</span><span class="n">id</span><span class="o">=</span><span class="n">A</span>  <span class="n">iteration</span><span class="o">=</span><span class="mi">0</span>  <span class="n">function</span><span class="o">=</span><span class="n">foo</span>  <span class="n">count</span><span class="o">=</span><span class="mi">2</span>
<span class="n">loop</span><span class="o">.</span><span class="n">id</span><span class="o">=</span><span class="n">A</span>  <span class="n">iteration</span><span class="o">=</span><span class="mi">1</span>  <span class="n">function</span><span class="o">=</span><span class="n">foo</span>  <span class="n">count</span><span class="o">=</span><span class="mi">2</span>
<span class="n">loop</span><span class="o">.</span><span class="n">id</span><span class="o">=</span><span class="n">A</span>  <span class="n">iteration</span><span class="o">=</span><span class="mi">2</span>  <span class="n">function</span><span class="o">=</span><span class="n">foo</span>  <span class="n">count</span><span class="o">=</span><span class="mi">2</span>
<span class="n">loop</span><span class="o">.</span><span class="n">id</span><span class="o">=</span><span class="n">B</span>  <span class="n">iteration</span><span class="o">=</span><span class="mi">0</span>  <span class="n">function</span><span class="o">=</span><span class="n">foo</span>  <span class="n">count</span><span class="o">=</span><span class="mi">1</span>
<span class="n">loop</span><span class="o">.</span><span class="n">id</span><span class="o">=</span><span class="n">B</span>  <span class="n">iteration</span><span class="o">=</span><span class="mi">1</span>  <span class="n">function</span><span class="o">=</span><span class="n">foo</span>  <span class="n">count</span><span class="o">=</span><span class="mi">1</span>
<span class="n">loop</span><span class="o">.</span><span class="n">id</span><span class="o">=</span><span class="n">B</span>  <span class="n">iteration</span><span class="o">=</span><span class="mi">2</span>  <span class="n">function</span><span class="o">=</span><span class="n">foo</span>  <span class="n">count</span><span class="o">=</span><span class="mi">1</span>
<span class="n">loop</span><span class="o">.</span><span class="n">id</span><span class="o">=</span><span class="n">B</span>  <span class="n">iteration</span><span class="o">=</span><span class="mi">3</span>  <span class="n">function</span><span class="o">=</span><span class="n">foo</span>  <span class="n">count</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
<p>Removing the <cite>iteration</cite> attribute from the aggregation key will
collapse input snapshots with different iteration values into a
single aggregate snapshot:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">loop</span><span class="o">.</span><span class="n">id</span><span class="o">=</span><span class="n">A</span>  <span class="n">function</span><span class="o">=</span><span class="n">foo</span>  <span class="n">count</span><span class="o">=</span><span class="mi">6</span>
<span class="n">loop</span><span class="o">.</span><span class="n">id</span><span class="o">=</span><span class="n">B</span>  <span class="n">function</span><span class="o">=</span><span class="n">foo</span>  <span class="n">count</span><span class="o">=</span><span class="mi">4</span>
</pre></div>
</div>
</section>
<section id="aggregation-attributes">
<h3>Aggregation attributes<a class="headerlink" href="#aggregation-attributes" title="Link to this heading">¶</a></h3>
<p>The aggregate service accumulates values of aggregation attributes in
input snapshots with similar aggregation keys. Specifically, it
reports the minimum and maximum value, and computes the sum of the
aggregation attributes in the input snapshots. Aggregate snapshots
include <cite>(min|max|sum)#attribute-name</cite> attributes with the
minimum, maximum, and sum values for each aggregation attribute,
respectively.</p>
<p>Note that only attributes with the <code class="docutils literal notranslate"><span class="pre">ASVALUE</span></code> property can be
aggregation attributes.</p>
</section>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Link to this heading">¶</a></h3>
<p>The following configuration generates a time profile for the function
annotation separated by loop id. Note: when using
<cite>time.inclusive.duration</cite> as aggregation attribute, we strongly
recommend to include the <cite>event.end</cite> event attributes for all
annotations of interest in the aggregation key (e.g.,
<cite>event.end#function</cite> in the example), or use the default, empty key.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nv">CALI_SERVICES_ENABLE</span><span class="o">=</span>aggregate,event,recorder,timestamp<span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="nv">CALI_EVENT_TRIGGER</span><span class="o">=</span><span class="k">function</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span><span class="nv">CALI_AGGREGATE_KEY</span><span class="o">=</span>event.end#function,loop.id<span class="w"> </span><span class="se">\</span>
<span class="w">      </span>./test/cali-basic-aggregate
<span class="o">==</span><span class="w"> </span>CALIPER:<span class="w"> </span>Registered<span class="w"> </span>aggregation<span class="w"> </span><span class="nv">service</span>
<span class="o">==</span><span class="w"> </span>CALIPER:<span class="w"> </span>Registered<span class="w"> </span>event<span class="w"> </span><span class="nv">service</span>
<span class="o">==</span><span class="w"> </span>CALIPER:<span class="w"> </span>Registered<span class="w"> </span>recorder<span class="w"> </span><span class="nv">service</span>
<span class="o">==</span><span class="w"> </span>CALIPER:<span class="w"> </span>Registered<span class="w"> </span>timestamp<span class="w"> </span><span class="nv">service</span>
<span class="o">==</span><span class="w"> </span>CALIPER:<span class="w"> </span><span class="nv">Initialized</span>
<span class="o">==</span><span class="w"> </span>CALIPER:<span class="w"> </span>aggregate:<span class="w"> </span>flushed<span class="w"> </span><span class="m">4</span><span class="w"> </span>snapshots.
<span class="o">==</span><span class="w"> </span>CALIPER:<span class="w"> </span>Wrote<span class="w"> </span><span class="m">57</span><span class="w"> </span>records.
</pre></div>
</div>
<p>The resulting file has the following contents:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">loop</span><span class="o">.</span><span class="n">id</span><span class="o">=</span><span class="n">A</span>  <span class="n">event</span><span class="o">.</span><span class="n">end</span><span class="c1">#function=foo  count=6</span>
  <span class="nb">min</span><span class="c1">#time.inclusive.duration=25</span>
  <span class="nb">max</span><span class="c1">#time.inclusive.duration=26</span>
  <span class="nb">sum</span><span class="c1">#time.inclusice.duration=151</span>
<span class="n">loop</span><span class="o">.</span><span class="n">id</span><span class="o">=</span><span class="n">B</span>  <span class="n">event</span><span class="o">.</span><span class="n">end</span><span class="c1">#function=foo  count=4</span>
  <span class="nb">min</span><span class="c1">#time.inclusive.duration=25</span>
  <span class="nb">max</span><span class="c1">#time.inclusive.duration=26</span>
  <span class="nb">sum</span><span class="c1">#time.inclusice.duration=102</span>
</pre></div>
</div>
</section>
</section>
<section id="alloc">
<span id="alloc-service"></span><h2>Alloc<a class="headerlink" href="#alloc" title="Link to this heading">¶</a></h2>
<p>The <cite>alloc</cite> service adds data tracking information to Caliper.
It records snapshots of allocation calls with their arguments and
return values, and resolves the containing allocations of any memory
addresses produced by other Caliper services, such as the <cite>libpfm</cite>
service.
By default, it will only use data tracking information provided via
the Caliper data tracking API, but in conjunction with the
<cite>sysalloc</cite> service it records and/or tracks any allocations by
hooking system allocation calls.
This service may potentially incur significant amounts of overhead when
recording/tracking frequent allocations/deallocations.</p>
<dl>
<dt>CALI_ALLOC_TRACK_ALLOCATIONS</dt><dd><p>Records snapshots when memory regions are being tracked or
untracked, storing the given label in the <cite>mem.alloc</cite> or
<cite>mem.free</cite> attribute, respectively. The snapshots also contain a
unique ID for the allocation in the <cite>alloc.uid</cite> attribute, and the
size of the allocated region in the <cite>alloc.total_size</cite> attribute.</p>
<p>Default: true</p>
</dd>
<dt>CALI_ALLOC_RESOLVE_ADDRESSES</dt><dd><p>When set, snapshots with memory addresses produced by other
services (e.g., Libpfm) will be appended with the allocations that
contain them. The snapshots then contain
<cite>alloc.label#address_attribute</cite>, <cite>alloc.uid#address_attribute</cite>,
and <cite>alloc.index#address_attribute</cite> attributes with the memory
region label, allocation ID, and array index for the memory
address attributes found in the snapshot.</p>
<p>Default: false</p>
</dd>
<dt>CALI_ALLOC_RECORD_ACTIVE_MEM</dt><dd><p>Records the amount of active allocated memory, in bytes, at each
snapshot, in the <cite>mem.active</cite> attribute.</p>
<p>Default: false</p>
</dd>
</dl>
</section>
<section id="callpath">
<span id="callpath-service"></span><h2>Callpath<a class="headerlink" href="#callpath" title="Link to this heading">¶</a></h2>
<p>The <cite>callpath</cite> service uses libunwind to add callpaths to Caliper
context snapshots. By default, the callpath service provides
call-stack addresses. Set <code class="docutils literal notranslate"><span class="pre">CALI_CALLPATH_USE_NAMES=true</span></code> to retrieve
function names on-line. Call-path addresses are provided in the
<code class="docutils literal notranslate"><span class="pre">callpath.address</span></code> attribute, call-path region names in
<code class="docutils literal notranslate"><span class="pre">callpath.regname</span></code>. Example:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">CALI_SERVICES_ENABLE</span><span class="o">=</span>callpath:event:recorder:trace
$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">CALI_CALLPATH_USE_NAME</span><span class="o">=</span><span class="nb">true</span>
$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">CALI_CALLPATH_USE_ADDRESS</span><span class="o">=</span><span class="nb">true</span>
$<span class="w"> </span>./test/cali-basic
$<span class="w"> </span>cali-query<span class="w"> </span>-e<span class="w"> </span>--print-attributes<span class="o">=</span>callpath.address:callpath.regname
$<span class="w"> </span>callpath.address<span class="o">=</span><span class="m">401207</span>/2aaaac052d5d/400fd9,callpath.regname<span class="o">=</span>main/__libc_start_main/_start
</pre></div>
</div>
<p>The example shows the <code class="docutils literal notranslate"><span class="pre">callpath.address</span></code> and <code class="docutils literal notranslate"><span class="pre">callpath.regname</span></code>
attributes in Caliper context records.</p>
<dl>
<dt>CALI_CALLPATH_USE_NAME</dt><dd><p>Provide region names for call paths. Incurs higher overhead. Note
that region names for C++ and Fortran functions are not demangled.</p>
<p>Default: false.</p>
</dd>
<dt>CALI_CALLPATH_USE_ADDRESS</dt><dd><p>Record region addresses for call paths.</p>
<p>Default: true.</p>
</dd>
<dt>CALI_CALLPATH_SKIP_FRAMES</dt><dd><p>Skip a number of stack frames. This avoids recording stack frames
within the Caliper library.</p>
<p>Default: 10</p>
</dd>
</dl>
</section>
<section id="cupti">
<span id="cupti-service"></span><h2>CUpti<a class="headerlink" href="#cupti" title="Link to this heading">¶</a></h2>
<p>The <cite>cupti</cite> service records CUDA events and wraps CUDA API calls
through the CUpti interface. Specifically, it can intercept runtime
API calls, driver API calls, resource creation and destruction events
(contexts and streams), and synchronization events. It can also
interpret NVTX source-code annotations as Caliper annotations.</p>
<dl>
<dt>CALI_CUPTI_CALLBACK_DOMAINS</dt><dd><p>String. A comma-separated list of CUpti callback domains to
intercept.  Values:</p>
<ul class="simple">
<li><p><cite>runtime</cite>: The CUDA runtime API, e.g. <code class="docutils literal notranslate"><span class="pre">cudaDeviceSynchronize</span></code>.</p></li>
<li><p><cite>driver</cite>:  The CUDA driver API, e.g. <code class="docutils literal notranslate"><span class="pre">cuInit</span></code>. This category
tends to have significant overheads.</p></li>
<li><p><cite>resource</cite>: Stream and context creation.</p></li>
<li><p><cite>sync</cite>: Synchronization events.</p></li>
<li><p><cite>nvtx</cite>: Interpret NVTX annotations as Caliper annotations.</p></li>
<li><p><cite>none</cite>: Don’t capture callbacks.</p></li>
</ul>
<p>Default: <cite>runtime,sync</cite></p>
</dd>
<dt>CALI_CUPTI_RECORD_SYMBOL</dt><dd><p>Boolean. Record the kernel symbol name for callbacks (typically
when launching kernels). Default: <cite>true</cite>.</p>
</dd>
<dt>CALI_CUPTI_RECORD_CONTEXT</dt><dd><p>Boolean. Record CUDA context ID. Default: <cite>true</cite>.</p>
</dd>
</dl>
<section id="cupti-attributes">
<h3>CUpti Attributes<a class="headerlink" href="#cupti-attributes" title="Link to this heading">¶</a></h3>
<p>The <cite>cupti</cite> service adds the following attributes:</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>cupti.runtimeAPI</p></td>
<td><p>Name of CUDA runtime API call. Nested.</p></td>
</tr>
<tr class="row-even"><td><p>cupti.driverAPI</p></td>
<td><p>Name of CUDA driver API call. Nested.</p></td>
</tr>
<tr class="row-odd"><td><p>cupti.resource</p></td>
<td><p>Resource being created or destroyed.
(<cite>create_context</cite>, <cite>destroy_context</cite>,
<cite>create_stream</cite>, <cite>destroy_stream</cite>).</p></td>
</tr>
<tr class="row-even"><td><p>cupti.sync</p></td>
<td><p>Object being synchronized (<cite>context</cite> or <cite>stream</cite>)</p></td>
</tr>
<tr class="row-odd"><td><p>nvtx.range</p></td>
<td><p>Name of NVTX range annotation.</p></td>
</tr>
<tr class="row-even"><td><p>cupti.symbolName</p></td>
<td><p>Symbol name of a kernel being launched.</p></td>
</tr>
<tr class="row-odd"><td><p>cupti.contextID</p></td>
<td><p>CUDA context ID. Recorded with synchronization
and resource events.</p></td>
</tr>
<tr class="row-even"><td><p>cupti.deviceID</p></td>
<td><p>CUDA device ID. Recorded with resource and sync
events.</p></td>
</tr>
<tr class="row-odd"><td><p>cupti.streamID</p></td>
<td><p>CUDA Stream ID. Recorded with stream resource
sync events.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="cupti-event-sampling-experimental">
<h3>CUpti event sampling (EXPERIMENTAL)<a class="headerlink" href="#cupti-event-sampling-experimental" title="Link to this heading">¶</a></h3>
<p>The CUpti service can read hardware “events” from CUDA devices at
every snapshot using CUpti’s continuous event collection. However,
note that this capability is only available on Tesla devices, and it
also tends to have very high overhead.</p>
<p>To activate it, provide the event ID for the event to read in
<cite>CALI_CUPTI_SAMPLE_EVENT_ID</cite>. The possible event IDs can be obtained
with the <code class="docutils literal notranslate"><span class="pre">cupti_query</span></code> program that is provided as a sample with the
CUDA/CUpti toolkit. Values will be stored in the
cupti.event.EVENT_NAME attribute.</p>
<p>As an example, consider sampling instructions executed on the
device. From the <code class="docutils literal notranslate"><span class="pre">cupti_query</span></code> output, we learn that the event ID
for this event is 83886156</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Event</span><span class="c1"># 13</span>
<span class="n">Id</span>        <span class="o">=</span> <span class="mi">83886156</span>
<span class="n">Name</span>      <span class="o">=</span> <span class="n">inst_executed</span>
<span class="n">Shortdesc</span> <span class="o">=</span> <span class="n">inst_executed</span>
<span class="n">Longdesc</span>  <span class="o">=</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">instructions</span> <span class="n">executed</span> <span class="n">per</span> <span class="n">warp</span><span class="o">.</span>
<span class="n">Category</span>  <span class="o">=</span> <span class="n">CUPTI_EVENT_CATEGORY_INSTRUCTION</span>
</pre></div>
</div>
<p>We can now add instructions executed to Caliper snapshots. The
following configuration can do that:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CALI_SERVICES_ENABLE</span><span class="o">=</span><span class="n">cupti</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">recorder</span><span class="p">,</span><span class="n">trace</span><span class="p">,</span><span class="n">timestamp</span>
<span class="n">CALI_CUPTI_CALLBACK_DOMAINS</span><span class="o">=</span><span class="n">runtime</span><span class="p">,</span><span class="n">resource</span>
<span class="n">CALI_CUPTI_SAMPLE_EVENT_ID</span><span class="o">=</span><span class="mi">83886156</span>
<span class="n">CALI_TIMER_SNAPSHOT_DURATION</span><span class="o">=</span><span class="n">true</span>
</pre></div>
</div>
<p>Results:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cali</span><span class="o">-</span><span class="n">query</span> <span class="o">-</span><span class="n">q</span> <span class="s2">&quot;select sum(time.duration),sum(cupti.event.inst_executed) group by function,cupti.runtimeAPI format tree&quot;</span>

<span class="n">Path</span>                                     <span class="n">time</span><span class="o">.</span><span class="n">duration</span> <span class="n">cupti</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">inst_executed</span>
<span class="n">main</span>                                             <span class="mi">42123</span>                         <span class="mi">0</span>
  <span class="n">LagrangeLeapFrog</span>                              <span class="mi">192340</span>                         <span class="mi">0</span>
    <span class="n">CalcTimeConstraintsForElems</span>                  <span class="mi">13768</span>                         <span class="mi">0</span>
      <span class="n">cudaStreamSynchronize</span>                      <span class="mi">65776</span>                         <span class="mi">0</span>
      <span class="n">cudaPeekAtLastError</span>                        <span class="mi">66714</span>                         <span class="mi">0</span>
      <span class="n">cudaLaunch</span>                                 <span class="mi">76372</span>                    <span class="mi">214944</span>
      <span class="n">cudaSetupArgument</span>                         <span class="mi">190416</span>                         <span class="mi">0</span>
      <span class="n">cudaConfigureCall</span>                          <span class="mi">60859</span>                         <span class="mi">0</span>
    <span class="n">CalcEnergyForElems</span>                          <span class="mi">695449</span>                         <span class="mi">0</span>
      <span class="n">cudaStreamSynchronize</span>                     <span class="mi">532691</span>                         <span class="mi">0</span>
      <span class="n">cudaPeekAtLastError</span>                      <span class="mi">1138736</span>                         <span class="mi">0</span>
      <span class="n">cudaLaunch</span>                               <span class="mi">1223774</span>                   <span class="mi">1766400</span>
      <span class="n">cudaSetupArgument</span>                        <span class="mi">1510537</span>                         <span class="mi">0</span>
      <span class="n">cudaConfigureCall</span>                         <span class="mi">310107</span>                         <span class="mi">0</span>
<span class="o">...</span>
</pre></div>
</div>
</section>
</section>
<section id="cuptitrace">
<h2>CUptiTrace<a class="headerlink" href="#cuptitrace" title="Link to this heading">¶</a></h2>
<p>The <cite>cuptitrace</cite> service records an asynchronous stream of CUDA
activities, such as memory copies or kernel executions. CUDA activity
records contain the kind of activity, its start and end time, and
additional attributes listed below.</p>
<p>Note that the timestamps in CUDA activity records are generated by
CUpti, not by Caliper’s timestamp service. The
<code class="docutils literal notranslate"><span class="pre">CALI_CUPTITRACE_SNAPSHOT_TIMESTAMPS</span></code> option collects CUpti
timestamps for all Caliper snapshots, allowing one to compare
timestamps between the CUDA activity records and host-side Caliper
events. With <code class="docutils literal notranslate"><span class="pre">CALI_CUPTITRACE_SNAPSHOT_DURATION</span></code>, cuptitrace will
also calculate the time duration of host-side events based on CUpti
timestamps.</p>
<dl>
<dt>CALI_CUPTITRACE_ACTIVITIES</dt><dd><p>The CUpti activity kinds to record. Comma-separated list.
Possible values:</p>
<blockquote>
<div><p>device:       Device info
correlation:  Correlation records
driver:       Driver API
runtime:      Runtime API
kernel:       CUDA Kernels being executed
memcpy:       CUDA memory copies
uvm:          Unified memory events</p>
</div></blockquote>
<p>Default: correlation,device,kernel,memcpy,runtime</p>
</dd>
<dt>CALI_CUPTITRACE_CORRELATE_CONTEXT</dt><dd><p>Add the Caliper context (annotations) from the point where a CUDA
activity was launched to the CUDA activity records. Boolean.</p>
<p>Default: true.</p>
</dd>
<dt>CALI_CUPTITRACE_SNAPSHOT_TIMESTAMPS</dt><dd><p>Add CUpti timestamps to all Caliper snapshot records. Allows one
to compare timestamps from CUDA activity records with host-side
Caliper events. Boolean.</p>
<p>Default: false</p>
</dd>
<dt>CALI_CUPTITRACE_SNAPSHOT_DURATION</dt><dd><p>Calculate duration of host-side events using CUpti timestamps. Useful
to compare duration of GPU and Host activities. Boolean.</p>
<p>Default: false</p>
</dd>
<dt>CALI_CUPTITRACE_UVM_TRANSFERS</dt><dd><p>If uvm memory events are enabled, record host-to-device and
device-to-host transfers.</p>
<p>Default: true</p>
</dd>
<dt>CALI_CUPTITRACE_UVM_PAGEFAULTS</dt><dd><p>If uvm memory events are enabled, record CPU and GPU pagefaults.</p>
<p>Default: true</p>
</dd>
</dl>
<p>CUptiTrace records contain the following attributes:</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>cupti.activity.kind</p></td>
<td><p>Kind of the CUDA activity. Possible values:
“memcpy” or “kernel”.</p></td>
</tr>
<tr class="row-even"><td><p>cupti.activity.start</p></td>
<td><p>Start timestamp of the CUDA activity (CUpti
timestamp).</p></td>
</tr>
<tr class="row-odd"><td><p>cupti.activity.end</p></td>
<td><p>End timestamp of the CUDA activity (CUpti
timestamp).</p></td>
</tr>
<tr class="row-even"><td><p>cupti.activity.duration</p></td>
<td><p>Duration of the CUDA activity in nanoseconds.</p></td>
</tr>
<tr class="row-odd"><td><p>cupti.host.duration</p></td>
<td><p>Duration of a host-side activity in nanoseconds.</p></td>
</tr>
<tr class="row-even"><td><p>cupti.kernel.name</p></td>
<td><p>For kernels, the function name of the kernel.</p></td>
</tr>
<tr class="row-odd"><td><p>cupti.memcpy.kind</p></td>
<td><p>For memory copies, the direction of the memory
transfer (device-to-host [DtoH], host-to-device
[HtoD], etc.)</p></td>
</tr>
<tr class="row-even"><td><p>cupti.starttime</p></td>
<td><p>CUpti timestamp at program start.</p></td>
</tr>
<tr class="row-odd"><td><p>cupti.timestamp</p></td>
<td><p>CUpti timestamp attached to host-side Caliper
snapshot records.</p></td>
</tr>
<tr class="row-even"><td><p>cupti.device.uuid</p></td>
<td><p>A globally unique ID of the CUDA device the
activity is running on.</p></td>
</tr>
<tr class="row-odd"><td><p>cupti.device.uuid</p></td>
<td><p>A globally unique ID of the CUDA device the
activity is running on.</p></td>
</tr>
<tr class="row-even"><td><p>cupti.uvm.kind</p></td>
<td><p>The kind of unified memory event.</p></td>
</tr>
<tr class="row-odd"><td><p>cupti.fault.addr</p></td>
<td><p>Pagefault address for unified memory events.</p></td>
</tr>
<tr class="row-even"><td><p>cupti.uvm.bytes</p></td>
<td><p>Bytes transferred in a unified memory event.</p></td>
</tr>
<tr class="row-odd"><td><p>cupti.uvm.migration.cause</p></td>
<td><p>Cause of a unified memory page migration.</p></td>
</tr>
<tr class="row-even"><td><p>cupti.uvm.access.type</p></td>
<td><p>Access type that caused a unified memory page
fault.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="environment-information">
<h2>Environment Information<a class="headerlink" href="#environment-information" title="Link to this heading">¶</a></h2>
<p>The environment information (<cite>env</cite>) service collects runtime
environment information at process startup and adds it to the Caliper
context.</p>
<p>Specifically, it collects</p>
<blockquote>
<div><ul class="simple">
<li><p>The process’ command line (program name and arguments)</p></li>
<li><p>Machine type and hostname, and operating system type, release, and
version</p></li>
<li><p>Date and time of program start in text form</p></li>
</ul>
</div></blockquote>
<p>Moreover, the environment information service can put any environment
variable defined at program start on the Caliper blackboard.</p>
<dl>
<dt>CALI_ENV_EXTRA=(variable1:variable2:…)</dt><dd><p>List of extra environment variables to import.</p>
<p>Default: empty</p>
</dd>
</dl>
</section>
<section id="event">
<span id="event-service"></span><h2>Event<a class="headerlink" href="#event" title="Link to this heading">¶</a></h2>
<p>The event trigger service triggers snapshots when attributes are
updated. It is possible to select a list of snapshot-triggering
attributes, or have any attribute update trigger snapshots.
Updates of attributes with the <code class="docutils literal notranslate"><span class="pre">CALI_ATTR_SKIP_EVENTS</span></code> property will
never trigger snapshots.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">CALI_EVENT_ENABLE_SNAPSHOT_INFO</span></code> is enabled, snapshots triggered
by the event service include an attribute which describes the event
that triggered the snapshot, in the following form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">event</span><span class="o">.&lt;</span><span class="n">begin</span><span class="o">|</span><span class="nb">set</span><span class="o">|</span><span class="n">end</span><span class="o">&gt;</span><span class="c1">#&lt;attribute name&gt;=&lt;value&gt;</span>
</pre></div>
</div>
<p>For example, a snapshot triggered by the call
<code class="docutils literal notranslate"><span class="pre">cali_set_int_byname(&quot;my.iteration&quot;,</span> <span class="pre">42);</span></code> includes the attribute
<cite>event.set#my.iteration=42</cite> to describe the triggering event.
Example:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">CALI_SERVICES_ENABLE</span><span class="o">=</span>event,recorder,trace
$<span class="w"> </span>./test/cali-basic
$<span class="w"> </span>cali-query<span class="w"> </span>-e<span class="w"> </span><span class="m">150819</span>-113409_40027_W5Z0mWvoJUyn.cali
event.begin#initialization<span class="o">=</span>true,cali.snapshot.event.begin<span class="o">=</span><span class="m">39</span>
event.end#initialization<span class="o">=</span>true,cali.snapshot.event.end<span class="o">=</span><span class="m">39</span>,initialization<span class="o">=</span><span class="nb">true</span>
event.begin#loop<span class="o">=</span>true,cali.snapshot.event.begin<span class="o">=</span><span class="m">53</span>
event.set#iteration<span class="o">=</span><span class="m">0</span>,cali.snapshot.event.set<span class="o">=</span><span class="m">63</span>,loop<span class="o">=</span><span class="nb">true</span>
event.set#iteration<span class="o">=</span><span class="m">1</span>,cali.snapshot.event.set<span class="o">=</span><span class="m">63</span>,iteration<span class="o">=</span><span class="m">0</span>,loop<span class="o">=</span><span class="nb">true</span>
event.set#iteration<span class="o">=</span><span class="m">2</span>,cali.snapshot.event.set<span class="o">=</span><span class="m">63</span>,iteration<span class="o">=</span><span class="m">1</span>,loop<span class="o">=</span><span class="nb">true</span>
event.set#iteration<span class="o">=</span><span class="m">3</span>,cali.snapshot.event.set<span class="o">=</span><span class="m">63</span>,iteration<span class="o">=</span><span class="m">2</span>,loop<span class="o">=</span><span class="nb">true</span>
event.end#iteration<span class="o">=</span><span class="m">3</span>,cali.snapshot.event.end<span class="o">=</span><span class="m">63</span>,iteration<span class="o">=</span><span class="m">3</span>,loop<span class="o">=</span><span class="nb">true</span>
event.end#loop<span class="o">=</span>true,cali.snapshot.event.end<span class="o">=</span><span class="m">53</span>,loop<span class="o">=</span><span class="nb">true</span>
</pre></div>
</div>
<p>By setting <code class="docutils literal notranslate"><span class="pre">CALI_EVENT_TRIGGER</span></code>, we can configure the example to
only trigger snapshot for “iteration” attribute updates:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">CALI_SERVICES_ENABLE</span><span class="o">=</span>event,recorder,trace
$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">CALI_EVENT_TRIGGER</span><span class="o">=</span>iteration
$<span class="w"> </span>./test/cali-basic
$<span class="w"> </span>cali-query<span class="w"> </span>-e<span class="w"> </span><span class="m">150819</span>-113409_40027_W5Z0mWvoJUyn.cali
event.set#iteration<span class="o">=</span><span class="m">0</span>,cali.snapshot.event.set<span class="o">=</span><span class="m">63</span>,loop<span class="o">=</span><span class="nb">true</span>
event.set#iteration<span class="o">=</span><span class="m">1</span>,cali.snapshot.event.set<span class="o">=</span><span class="m">63</span>,iteration<span class="o">=</span><span class="m">0</span>,loop<span class="o">=</span><span class="nb">true</span>
event.set#iteration<span class="o">=</span><span class="m">2</span>,cali.snapshot.event.set<span class="o">=</span><span class="m">63</span>,iteration<span class="o">=</span><span class="m">1</span>,loop<span class="o">=</span><span class="nb">true</span>
event.set#iteration<span class="o">=</span><span class="m">3</span>,cali.snapshot.event.set<span class="o">=</span><span class="m">63</span>,iteration<span class="o">=</span><span class="m">2</span>,loop<span class="o">=</span><span class="nb">true</span>
event.end#iteration<span class="o">=</span><span class="m">3</span>,cali.snapshot.event.end<span class="o">=</span><span class="m">63</span>,iteration<span class="o">=</span><span class="m">3</span>,loop<span class="o">=</span><span class="nb">true</span>
</pre></div>
</div>
<section id="value-filtering">
<h3>Value filtering<a class="headerlink" href="#value-filtering" title="Link to this heading">¶</a></h3>
<p>With filtering, the event service only triggers snapshots for specific
values or patterns (e.g., region names). You can provide include or
exclude filters. There are three pattern types:</p>
<dl class="simple">
<dt>match</dt><dd><p>Match the exact value</p>
</dd>
<dt>startswith</dt><dd><p>Match the start of the string</p>
</dd>
<dt>regex</dt><dd><p>Match a regular expression</p>
</dd>
</dl>
<p>You can specify multiple patterns and combine them as needed, e.g. to
include only “important_region” as well as any region starting with
<code class="docutils literal notranslate"><span class="pre">MPI_</span></code> or <code class="docutils literal notranslate"><span class="pre">mylib_</span></code>:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nv">CALI_EVENT_INCLUDE_REGIONS</span><span class="o">=</span><span class="s2">&quot;match(important_region),startswith(MPI_,mylib_)&quot;</span>
</pre></div>
</div>
</section>
<section id="config-variables">
<h3>Config variables<a class="headerlink" href="#config-variables" title="Link to this heading">¶</a></h3>
<dl>
<dt>CALI_EVENT_TRIGGER</dt><dd><p>List of attributes that trigger measurement snapshots.
If empty, all user attributes trigger snapshots.</p>
<p>Default: empty</p>
</dd>
<dt>CALI_EVENT_ENABLE_SNAPSHOT_INFO</dt><dd><p>Boolean. Generate the event.begin#attr etc. attributes for each event snapshot.
Turning this off can decrease runtime overheads.</p>
<p>Default: true</p>
</dd>
<dt>CALI_EVENT_REGION_LEVEL</dt><dd><p>Minimum region level that triggers snapshots. Default: 0</p>
</dd>
<dt>CALI_EVENT_INCLUDE_REGIONS</dt><dd><p>Specify a value filter to only trigger snapshots for the provided
patterns. See above for the different pattern options.</p>
<p>Default: empty (no filter)</p>
</dd>
<dt>CALI_EVENT_EXCLUDE_REGIONS</dt><dd><p>Like above, but defines a value filter to skip snapshots for
the provided patterns.</p>
<p>Default: empty (no filter)</p>
</dd>
<dt>CALI_EVENT_INCLUDE_BRANCHES</dt><dd><p>Specifies branches by name (using a pattern) to measure.</p>
</dd>
</dl>
</section>
</section>
<section id="debug">
<h2>Debug<a class="headerlink" href="#debug" title="Link to this heading">¶</a></h2>
<p>The debug service prints an event log on the selected Caliper log
stream. This is useful to debug source-code annotations. Note that you
need to set Caliper’s verbosity level to at least 2 to see the log
output.</p>
<p>Example:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">CALI_SERVICES_ENABLE</span><span class="o">=</span>debug
$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">CALI_LOG_VERBOSITY</span><span class="o">=</span><span class="m">2</span>
$<span class="w"> </span>./test/cali-basic
<span class="o">==</span><span class="w"> </span>CALIPER:<span class="w"> </span>Available<span class="w"> </span>services:<span class="w"> </span>callpath<span class="w"> </span>papi<span class="w"> </span>debug<span class="w"> </span>event<span class="w"> </span>pthread<span class="w"> </span>recorder<span class="w"> </span>timestamp<span class="w"> </span><span class="nv">mpi</span>
<span class="o">==</span><span class="w"> </span>CALIPER:<span class="w"> </span>Registered<span class="w"> </span>debug<span class="w"> </span><span class="nv">service</span>
<span class="o">==</span><span class="w"> </span>CALIPER:<span class="w"> </span>Initialized
...
<span class="o">==</span><span class="w"> </span>CALIPER:<span class="w"> </span>Event:<span class="w"> </span>create_attribute<span class="w"> </span><span class="o">(</span><span class="nv">attr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>phase<span class="o">)</span>
<span class="o">==</span><span class="w"> </span>CALIPER:<span class="w"> </span>Event:<span class="w"> </span>pre_begin<span class="w"> </span><span class="o">(</span><span class="nv">attr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>phase<span class="o">)</span>
<span class="o">==</span><span class="w"> </span>CALIPER:<span class="w"> </span>Event:<span class="w"> </span>pre_begin<span class="w"> </span><span class="o">(</span><span class="nv">attr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>phase<span class="o">)</span>
<span class="o">==</span><span class="w"> </span>CALIPER:<span class="w"> </span>Event:<span class="w"> </span>pre_end<span class="w"> </span><span class="o">(</span><span class="nv">attr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>phase<span class="o">)</span>
<span class="o">==</span><span class="w"> </span>CALIPER:<span class="w"> </span>Event:<span class="w"> </span>pre_begin<span class="w"> </span><span class="o">(</span><span class="nv">attr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>phase<span class="o">)</span>
<span class="o">==</span><span class="w"> </span>CALIPER:<span class="w"> </span>Event:<span class="w"> </span>create_attribute<span class="w"> </span><span class="o">(</span><span class="nv">attr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>iteration<span class="o">)</span>
<span class="o">==</span><span class="w"> </span>CALIPER:<span class="w"> </span>Event:<span class="w"> </span>pre_set<span class="w"> </span><span class="o">(</span><span class="nv">attr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>iteration<span class="o">)</span>
<span class="o">==</span><span class="w"> </span>CALIPER:<span class="w"> </span>Event:<span class="w"> </span>pre_set<span class="w"> </span><span class="o">(</span><span class="nv">attr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>iteration<span class="o">)</span>
<span class="o">==</span><span class="w"> </span>CALIPER:<span class="w"> </span>Event:<span class="w"> </span>pre_set<span class="w"> </span><span class="o">(</span><span class="nv">attr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>iteration<span class="o">)</span>
<span class="o">==</span><span class="w"> </span>CALIPER:<span class="w"> </span>Event:<span class="w"> </span>pre_set<span class="w"> </span><span class="o">(</span><span class="nv">attr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>iteration<span class="o">)</span>
<span class="o">==</span><span class="w"> </span>CALIPER:<span class="w"> </span>Event:<span class="w"> </span>pre_end<span class="w"> </span><span class="o">(</span><span class="nv">attr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>iteration<span class="o">)</span>
<span class="o">==</span><span class="w"> </span>CALIPER:<span class="w"> </span>Event:<span class="w"> </span>pre_end<span class="w"> </span><span class="o">(</span><span class="nv">attr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>phase<span class="o">)</span>
<span class="o">==</span><span class="w"> </span>CALIPER:<span class="w"> </span>Event:<span class="w"> </span>pre_end<span class="w"> </span><span class="o">(</span><span class="nv">attr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>phase<span class="o">)</span>
<span class="o">==</span><span class="w"> </span>CALIPER:<span class="w"> </span>Event:<span class="w"> </span><span class="nv">finish</span>
<span class="o">==</span><span class="w"> </span>CALIPER:<span class="w"> </span>Finished
</pre></div>
</div>
</section>
<section id="io">
<span id="io-service"></span><h2>IO<a class="headerlink" href="#io" title="Link to this heading">¶</a></h2>
<p>The io service wraps POSIX IO calls (open,close,read,write) and
collects information about the amount of bytes read and written
through these IO calls, as well as filesystems and mount points
read from or written to. IO operations trigger <cite>io.region</cite> begin
and end events. It provides the following attributes:</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><cite>io.region</cite></p></td>
<td><p>An I/O region. Either “metadata”, “read” or
“write”.</p></td>
</tr>
<tr class="row-even"><td><p><cite>io.filesystem</cite></p></td>
<td><p>The filesystem type targeted by the IO operation.</p></td>
</tr>
<tr class="row-odd"><td><p><cite>io.mount.point</cite></p></td>
<td><p>The mount point targeted by the IO operation.</p></td>
</tr>
<tr class="row-even"><td><p><cite>io.bytes.read</cite></p></td>
<td><p>Bytes read in the IO operation.</p></td>
</tr>
<tr class="row-odd"><td><p><cite>io.bytes.written</cite></p></td>
<td><p>Bytes written in the IO operation.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="libpfm">
<span id="libpfm-service"></span><h2>Libpfm<a class="headerlink" href="#libpfm" title="Link to this heading">¶</a></h2>
<p>The libpfm service performs per-thread event-based sampling. The user
may configure the event upon which to sample, the values to record for
each sample, and the sampling period.</p>
<dl>
<dt>CALI_LIBPFM_EVENTS</dt><dd><p>Comma-separated list of events to sample. Event names are resolved
through libpfm, and may include software and hardware events (see
libpfm’s showevtinfo tool
<a class="reference external" href="https://sourceforge.net/p/perfmon2/libpfm4/ci/master/tree/examples/">https://sourceforge.net/p/perfmon2/libpfm4/ci/master/tree/examples/</a>
to obtain a list of events available on a particular system).</p>
<p>Default: cycles</p>
</dd>
<dt>CALI_LIBPFM_ENABLE_SAMPLING</dt><dd><p>Whether to record event samples. If set, will trigger a snapshot
containing all sampled attributes listed in
CALI_LIBPFM_SAMPLE_ATTRIBUTES after CALI_SAMPLE_PERIOD events have
occurred.</p>
<p>Default: true</p>
</dd>
<dt>CALI_LIBPFM_RECORD_COUNTERS</dt><dd><p>If set, counter values of all active events will be recorded
at every Caliper snapshot.</p>
<p>Default: true</p>
</dd>
<dt>CALI_LIBPFM_SAMPLE_ATTRIBUTES</dt><dd><p>Comma-separated list of attributes to record for each sample.</p>
<p>Available entries are:</p>
<blockquote>
<div><p>ip             Instruction pointer
id             Sample id
stream_id      Stream id
time           Timestamp
tid            Thread id
period         Current sampling period
cpu            CPU
transaction    Type of transaction
addr           Data address*
weight         Latency*
data_src       Encoding for memory resource (L1, L2, DRAM etc.)*</p>
<p>*available only for certain events.</p>
</div></blockquote>
<p>Default: ip,time,tid,cpu</p>
</dd>
<dt>CALI_LIBPFM_PERIOD</dt><dd><p>Sampling period for each event (valid when sampling is enabled).
When set to a value N, a sample will  be recorded after every N
number of events has occurred.</p>
<p>For multiple events, this should be a comma-separated list for the
periods of respective events.</p>
<p>Default: 20000000</p>
</dd>
<dt>CALI_LIBPFM_PRECISE_IP</dt><dd><p>Whether to set (precise) for events that support precise ip. Some
events require (precise) to be set, for others it is optional (see
output of libpfm’s showevtinfo tool
<a class="reference external" href="https://sourceforge.net/p/perfmon2/libpfm4/ci/master/tree/examples/">https://sourceforge.net/p/perfmon2/libpfm4/ci/master/tree/examples/</a>
to determine when it is available or required).</p>
<p>For multiple events, this should be a comma-separated list for the
precise_ip values of respective events.</p>
<p>May be set to either 0, 1, or 2.</p>
<p>Default: 0</p>
</dd>
<dt>CALI_LIBPFM_CONFIG1</dt><dd><p>Extra event configuration. Some events require an additional
parameter to configure behavior, such as latency threshold (see
output of libpfm’s showevtinfo tool
<a class="reference external" href="https://sourceforge.net/p/perfmon2/libpfm4/ci/master/tree/examples/">https://sourceforge.net/p/perfmon2/libpfm4/ci/master/tree/examples/</a>
to determine when it is available or required).</p>
<p>For multiple events, this should be a comma-separated list for the
config1 values of respective events.</p>
<p>Default: 0</p>
</dd>
</dl>
<p>The following example shows how to configure PEBS memory access sampling
with a latency threshold (available on SandyBridge, IvyBridge,
Haswell):</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nv">CALI_LIBPFM_EVENTS</span><span class="o">=</span>MEM_TRANS_RETIRED:LATENCY_ABOVE_THRESHOLD
<span class="nv">CALI_LIBPFM_PERIOD</span><span class="o">=</span><span class="m">100</span>
<span class="nv">CALI_LIBPFM_PRECISE_IP</span><span class="o">=</span><span class="m">2</span>
<span class="nv">CALI_LIBPFM_CONFIG1</span><span class="o">=</span><span class="m">100</span>
<span class="nv">CALI_LIBPFM_SAMPLE_ATTRIBUTES</span><span class="o">=</span>ip,time,tid,cpu,addr,weight
</pre></div>
</div>
</section>
<section id="mpi">
<span id="mpi-service"></span><h2>MPI<a class="headerlink" href="#mpi" title="Link to this heading">¶</a></h2>
<p>The MPI service records MPI operations and the MPI rank. Use it to
keep track of the program execution spent in MPI. You can select the
MPI functions to track by setting <code class="docutils literal notranslate"><span class="pre">CALI_MPI_WHITELIST</span></code> or
<code class="docutils literal notranslate"><span class="pre">CALI_MPI_BLACKLIST</span></code> filters. By default, no MPI functions are
instrumented.</p>
<p>MPI function names are stored in the <code class="docutils literal notranslate"><span class="pre">mpi.function</span></code> attribute, and
the MPI rank in the <code class="docutils literal notranslate"><span class="pre">mpi.rank</span></code> attribute.</p>
<dl class="simple">
<dt>CALI_MPI_WHITELIST</dt><dd><p>Comma-separated list of MPI functions to instrument. Only
whitelisted functions will be instrumented.</p>
</dd>
<dt>CALI_MPI_BLACKLIST</dt><dd><p>Comma-separated list of MPI functions that fill be filtered. If a
blacklist has been set, all functions except for the ones in the
blacklist will be instrumented.  If both whitelist and blacklist
are set, only whitelisted functions will be instrumented, and the
blacklist will be applied to the whitelisted functions.</p>
</dd>
</dl>
<section id="mpi-message-tracing-experimental">
<h3>MPI message tracing (EXPERIMENTAL)<a class="headerlink" href="#mpi-message-tracing-experimental" title="Link to this heading">¶</a></h3>
<p>The MPI service can record communication information about
point-to-point messages being sent and received, as well as collective
communications. When enabled, message tracing will create snapshot
records for individual point-to-point messages sent or received
and for collective operations a process participates in.</p>
<dl class="simple">
<dt>CALI_MPI_MSG_TRACING</dt><dd><p>Enable message tracing. Default: false</p>
</dd>
</dl>
<p>Notes:</p>
<ul class="simple">
<li><p>Communication records will only be created for MPI functions
that are instrumented (i.e., they must be listed in
<cite>CALI_MPI_WHITELIST</cite>, and must not be listed
in <cite>CALI_MPI_BLACKLIST</cite>).</p></li>
<li><p>This feature is experimental. Many implementation aspects such as
attribute names and the information being recorded can change
in future versions.</p></li>
<li><p>Caliper does not synchronize timestamps between MPI ranks, i.e.
timestamps taken on different ranks may not be directly comparable</p></li>
</ul>
<p>Message tracing creates three types of records:</p>
<ul class="simple">
<li><p>Point-to-point message sent. Contains message destination, size, tag
and communicator info.</p></li>
<li><p>Point-to-point message received. Contains message source, size, tag,
and communicator info.</p></li>
<li><p>Collective communication. Contains collective type, amount of bytes
sent, and communicator info.</p></li>
</ul>
<p>Specifically, this information is encoded in the following attributes:</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><cite>mpi.call.id</cite></p></td>
<td><p>Integer.
A unique ID for the MPI call the communication
happened in. Can be used to associate the
communication with the surrounding begin/end
records for the MPI function. For MPI calls that
process multiple messages (e.g. <cite>MPI_Waitall</cite>),
the records for all communications completed
within the same function call have the same ID.</p></td>
</tr>
<tr class="row-even"><td><p><cite>mpi.msg.src</cite></p></td>
<td><p>Integer. Source rank, in the local communicator,
of a received message. Indicates a message
received event.</p></td>
</tr>
<tr class="row-odd"><td><p><cite>mpi.msg.dst</cite></p></td>
<td><p>Integer. Destination rank, in the local
communicator, of a message being sent. Indicates
a message sent event.</p></td>
</tr>
<tr class="row-even"><td><p><cite>mpi.msg.tag</cite></p></td>
<td><p>Integer. Tag of a message sent or received.</p></td>
</tr>
<tr class="row-odd"><td><p><cite>mpi.msg.size</cite></p></td>
<td><p>Integer. Size of message being sent or received
in a point-to-point message, or the amount of
data sent in a collective communication.</p></td>
</tr>
<tr class="row-even"><td><p><cite>mpi.coll.type</cite></p></td>
<td><p>Integer. The type of a collective communication.
Indicates a collective communication event.
Possible values: 1: Barrier.
2: N-to-N (e.g., <cite>MPI_Allgather</cite>).
3: 1-to-N (e.g., <cite>MPI_Bcast</cite>).
4: N-to-1 (e.g., <cite>MPI_Gather</cite>).</p></td>
</tr>
<tr class="row-odd"><td><p><cite>mpi.coll.root</cite></p></td>
<td><p>Integer. Root rank, in the local communicator,
of a 1-to-N or N-to-1 collective communication.</p></td>
</tr>
<tr class="row-even"><td><p><cite>mpi.comm.comm</cite></p></td>
<td><p>Integer. Unique ID for the communicator on which
this communication occurs.</p></td>
</tr>
<tr class="row-odd"><td><p><cite>mpi.comm.is_world</cite></p></td>
<td><p>Boolean. Present and set to <cite>true</cite> if the
communicator on which this communication occurs
is congruent to <cite>MPI_COMM_WORLD</cite> (This applies
<cite>MPI_COMM_WORLD</cite> itself and any duplicate of
<cite>MPI_COMM_WORLD</cite>). If true, then the local
source, destination, or collective root rank in
the record is identical to its world rank;
otherwise it is not.</p></td>
</tr>
<tr class="row-even"><td><p><cite>mpi.comm.size</cite></p></td>
<td><p>Size of the communicator on which this
communication occurs.</p></td>
</tr>
<tr class="row-odd"><td><p><cite>mpi.comm.list</cite></p></td>
<td><p>Lists the world ranks present in the local
communicator. Currently encoded as a binary
array.</p></td>
</tr>
</tbody>
</table>
<p>Currently, we record communication information for the
following MPI functions:</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Function / function group</p></td>
<td><p>Records</p></td>
</tr>
<tr class="row-even"><td><dl class="simple">
<dt><cite>MPI_Send</cite> and <cite>MPI_Isend</cite></dt><dd><p>variants</p>
</dd>
</dl>
</td>
<td><p>Message sent</p></td>
</tr>
<tr class="row-odd"><td><p><cite>MPI_Recv</cite></p></td>
<td><p>Message received</p></td>
</tr>
<tr class="row-even"><td><p><cite>MPI_Start</cite>, <cite>MPI_Startall</cite></p></td>
<td><p>Message(s) sent</p></td>
</tr>
<tr class="row-odd"><td><p><cite>MPI_Sendrecv</cite>,
<cite>MPI_Sendrecv_replace</cite></p></td>
<td><p>Message sent, message received</p></td>
</tr>
<tr class="row-even"><td><p><cite>MPI_Wait</cite> variants</p></td>
<td><p>Message(s) received</p></td>
</tr>
<tr class="row-odd"><td><p><cite>MPI_Test</cite> variants</p></td>
<td><p>Message(s) received (for completed
receive requests)</p></td>
</tr>
<tr class="row-even"><td><p><cite>MPI_Barrier</cite></p></td>
<td><p>Collective (barrier)</p></td>
</tr>
<tr class="row-odd"><td><p><cite>MPI_Bcast</cite>, <cite>MPI_Scatter</cite>,
<cite>MPI_Scatterv</cite></p></td>
<td><p>Collective (1-to-n)</p></td>
</tr>
<tr class="row-even"><td><p><cite>MPI_Reduce</cite> variants,
<cite>MPI_Gather</cite>, <cite>MPI_Gatherv</cite></p></td>
<td><p>Collective (n-to-1)</p></td>
</tr>
<tr class="row-odd"><td><p><cite>MPI_Allgather</cite>,
<cite>MPI_Allreduce</cite>,
<cite>MPI_Alltoall</cite>,
<cite>MPI_Allgatherv</cite>,
<cite>MPI_Alltoallv</cite>,
<cite>MPI_Reduce_scatter_block</cite>,
<cite>MPI_Scan</cite>, <cite>MPI_Exscan</cite></p></td>
<td><p>Collective (n-to-n)</p></td>
</tr>
</tbody>
</table>
<p>We do currently <em>not</em> cover:</p>
<ul class="simple">
<li><p><cite>MPI_Alltoallw</cite></p></li>
<li><p>Non-blocking and neighborhood collectives</p></li>
<li><p>I/O</p></li>
<li><p>One-sided communication</p></li>
<li><p>Process creation and management</p></li>
</ul>
</section>
</section>
<section id="mpi-report">
<span id="mpireport-service"></span><h2>MPI Report<a class="headerlink" href="#mpi-report" title="Link to this heading">¶</a></h2>
<p>The MPI report service (<cite>mpireport</cite>) aggregates, formats, and writes
collected Caliper records from all ranks in an MPI program into a
single global report.  By default, the mpireport service prints a
tabular, human-readable report of the collected snapshots. Users can
provide a query specification in CalQL syntax to define filter,
aggregation, and formatting options.</p>
<p>The mpireport service aggregates Caliper data across MPI processes
before printing it. This happens on every Caliper flush event.
Enabling the mpireport service will trigger a flush during
MPI_Finalize.</p>
<p>There are two aggregation steps: the first step aggregates data
locally on each MPI rank, the second step aggregates data across MPI
ranks. Results from the first (local) step are the input for the second
(cross-rank) aggregation step. Use <code class="docutils literal notranslate"><span class="pre">CALI_MPIREPORT_LOCAL_CONFIG</span></code> to define
a local aggregation specification. If none is given, the specification given
in <code class="docutils literal notranslate"><span class="pre">CALI_MPIREPORT_CONFIG</span></code> will be used for both the local and cross-rank
aggregation.</p>
<p>The <a class="reference internal" href="#mpi-service"><span class="std std-ref">mpi</span></a> service must be enabled for mpireport
to work.</p>
<dl>
<dt>CALI_MPIREPORT_FILENAME</dt><dd><p>File name of the output file. May be set to <code class="docutils literal notranslate"><span class="pre">stdout</span></code> or <code class="docutils literal notranslate"><span class="pre">stderr</span></code>
to print to the standard output or error streams, respectively.</p>
<p>Similar to the <cite>recorder</cite> service, the file name may contain fields
which will be substituted by attribute values (see <cite>recorder</cite>
service description).</p>
<p>Default: stdout</p>
</dd>
<dt>CALI_MPIREPORT_CONFIG</dt><dd><p>An aggregation and formatting specification in CalQL syntax
(<a class="reference internal" href="calql.html"><span class="doc">The CalQL query language</span></a>). Defines the cross-rank aggregation operation and
output formatting.</p>
<p>Default: empty; all attributes in the snapshots will be printed.</p>
</dd>
<dt>CALI_MPIREPORT_LOCAL_CONFIG</dt><dd><p>An aggregation specification in CalQL syntax for the first (local)
aggregation step on each rank.</p>
<p>Default: empty; use the cross-rank aggregation specification also for
the local aggregation step.</p>
</dd>
</dl>
<p>Example: Measure time in Caliper regions, compute inclusive times locally,
then compute the average inclusive time per MPI rank:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CALI_SERVICES_ENABLE</span><span class="o">=</span><span class="n">aggregate</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">mpi</span><span class="p">,</span><span class="n">mpireport</span><span class="p">,</span><span class="n">timestamp</span>
<span class="n">CALI_MPIREPORT_LOCAL_CONFIG</span><span class="o">=</span><span class="s2">&quot;select inclusive_sum(sum#time.duration) group by prop:nested&quot;</span>
<span class="n">CALI_MPIREPORT_CONFIG</span><span class="o">=</span><span class="s2">&quot;select avg(inclusive#sum#time.duration) as </span><span class="se">\&quot;</span><span class="s2">Time (Avg)</span><span class="se">\&quot;</span><span class="s2"> group by prop:nested format tree&quot;</span>
</pre></div>
</div>
</section>
<section id="ompt">
<span id="ompt-service"></span><h2>OMPT<a class="headerlink" href="#ompt" title="Link to this heading">¶</a></h2>
<p>The OMPT service records OpenMP information using the OpenMP tools interface
(OMPT). It creates Caliper regions for OpenMP parallel regions, worksharing
constructs (e.g., loops), and synchronization regions (e.g., barriers).</p>
<p>To use the ompt service, the OpenMP tools interface must be activated in the
OpenMP runtime. The ompt service activates the tools interface automatically
if a Caliper channel with the ompt service enabled is created before the
OpenMP runtime system is first initialized. If an ompt service instance is
only created after the OpenMP runtime system has been initialized, you may
have to activate manually OMPT by setting the <span class="target" id="index-0"></span><a class="reference internal" href="configuration.html#envvar-CALI_USE_OMPT"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">CALI_USE_OMPT</span></code></a>
environment variable to “1” or “true”.</p>
<p>The ompt service provides the following attributes:</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>omp.parallel</p></td>
<td><p>An OpenMP parallel region. The value is the
number of threads inside the parallel region.
Only set on the thread that created the parallel
region.</p></td>
</tr>
<tr class="row-even"><td><p>omp.work</p></td>
<td><p>An OpenMP worksharing region (“loop” etc.)</p></td>
</tr>
<tr class="row-odd"><td><p>omp.sync</p></td>
<td><p>An OpenMP synchronization region (e.g.,
“barrier”)</p></td>
</tr>
<tr class="row-even"><td><p>omp.num.threads</p></td>
<td><p>Number of threads in the current parallel region</p></td>
</tr>
<tr class="row-odd"><td><p>omp.proc.id</p></td>
<td><p>Arbitrary ID for the current thread</p></td>
</tr>
<tr class="row-even"><td><p>omp.thread.id</p></td>
<td><p>The OpenMP thread ID of the current thread in
the innermost parallel region</p></td>
</tr>
<tr class="row-odd"><td><p>omp.thread.type</p></td>
<td><p>The kind of OpenMP thread (“initial” or
“worker”)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="papi">
<span id="papi-service"></span><h2>PAPI<a class="headerlink" href="#papi" title="Link to this heading">¶</a></h2>
<p>The PAPI service collects hardware counter information through the
PAPI library.</p>
<dl class="simple">
<dt>CALI_PAPI_COUNTERS</dt><dd><p>The PAPI counters to read as comma-separated list.
Available counters can be found with the <cite>papi_avail</cite> command
provided by PAPI. If successfull, snapshots will contain
attributes named <code class="docutils literal notranslate"><span class="pre">papi.COUNTER_NAME</span></code>. Their value represents the
increase of that counter since the previous snapshot.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nv">CALI_SERVICES_ENABLE</span><span class="o">=</span>event,papi,trace,report
$<span class="w"> </span><span class="nv">CALI_PAPI_COUNTERS</span><span class="o">=</span>PAPI_TOT_CYC,PAPI_L1_DCM
$<span class="w"> </span>./test/cali-basic
papi.PAPI_TOT_CYC<span class="w"> </span>papi.PAPI_L1_DCM<span class="w"> </span><span class="k">function</span><span class="w"> </span>annotation<span class="w"> </span>loop<span class="w">     </span>iteration#mainloop
<span class="w">            </span><span class="m">36146</span><span class="w">              </span><span class="m">431</span>
<span class="w">            </span><span class="m">28328</span><span class="w">              </span><span class="m">372</span><span class="w"> </span>main
<span class="w">            </span><span class="m">20601</span><span class="w">              </span><span class="m">311</span><span class="w"> </span>main<span class="w">     </span>init
<span class="w">            </span><span class="m">37010</span><span class="w">              </span><span class="m">546</span><span class="w"> </span>main
<span class="w">             </span><span class="m">7147</span><span class="w">              </span><span class="m">150</span><span class="w"> </span>main<span class="w">                </span>mainloop
<span class="w">             </span><span class="m">8425</span><span class="w">              </span><span class="m">115</span><span class="w"> </span>main<span class="w">                </span>mainloop<span class="w">                  </span><span class="m">0</span>
</pre></div>
</div>
</section>
<section id="pthread">
<span id="pthread-service"></span><h2>Pthread<a class="headerlink" href="#pthread" title="Link to this heading">¶</a></h2>
<p>The Pthread service wraps <cite>pthread_create</cite> using GOTCHA, and adds a
<code class="docutils literal notranslate"><span class="pre">pthread.id</span></code> attribute with a numeric thread ID for the new child
thread. In doing so, the pthread service automatically creates a
Caliper thread scope on the child thread: this is useful to
automatically start sampling (e.g. with the <cite>sampler</cite> service) on each
new thread.</p>
</section>
<section id="recorder">
<span id="recorder-service"></span><h2>Recorder<a class="headerlink" href="#recorder" title="Link to this heading">¶</a></h2>
<p>The recorder service writes Caliper snapshot records into a file
using a custom text-based I/O format. These files can be read
with the <cite>cali-query</cite> tool.</p>
<p>Writing occurs during a flush phase, which prompts snapshot-buffering
services (in particular, the <cite>trace</cite> or <cite>aggregate</cite> services) to push
out buffered snapshot records for writing. A flush phase can take
several seconds and significantly disrupt program performance. By
default, Caliper initiates a flush at the end of the program
execution.</p>
<p>You can also set the directory and filename that should be used;
by default, the recorder service will auto-generate a
file name.</p>
<dl>
<dt>CALI_RECORDER_FILENAME=(stdout|stderr|filename pattern)</dt><dd><p>File name of the output file. May be set to <code class="docutils literal notranslate"><span class="pre">stdout</span></code> or <code class="docutils literal notranslate"><span class="pre">stderr</span></code>
to print to the standard output or error streams, respectively.</p>
<p>The file name string can contain fields, denoted by <code class="docutils literal notranslate"><span class="pre">%attribute_name%</span></code>,
which will be replaced with attribute values. For example, in an MPI
program with the <cite>mpi</cite> service enabled, the string <code class="docutils literal notranslate"><span class="pre">caliper-%mpi.rank%.cali</span></code>
will create files <code class="docutils literal notranslate"><span class="pre">caliper-0.cali</span></code>, <code class="docutils literal notranslate"><span class="pre">caliper-1.cali</span></code>, etc. for each
mpi rank. For this to work, the attributes named in the fields need to
be set on the blackboard during the flush phase.</p>
<p>Default: not set, auto-generates a unique file name.</p>
</dd>
<dt>CALI_RECORDER_DIRECTORY=(directory name)</dt><dd><p>Directory to write context trace files to. The directory must exist,
Caliper does not create it. Default: not set, use current working
directory.</p>
</dd>
</dl>
</section>
<section id="report">
<span id="report-service"></span><h2>Report<a class="headerlink" href="#report" title="Link to this heading">¶</a></h2>
<p>The report service aggregates, formats, and writes collected Caliper
records into files or stdout on Caliper flush events (typically, at
program end). By default, the report service prints a tabular,
human-readable report of the collected snapshots. Users can provide a
query specification in CalQL syntax to define filter, aggregation, and
formatting options.</p>
<dl>
<dt>CALI_REPORT_FILENAME</dt><dd><p>File name of the output file. May be set to <code class="docutils literal notranslate"><span class="pre">stdout</span></code> or <code class="docutils literal notranslate"><span class="pre">stderr</span></code>
to print to the standard output or error streams, respectively.</p>
<p>Similar to the <cite>recorder</cite> service, the file name may contain fields
which will be substituted by attribute values (see <cite>recorder</cite>
service description), for example to create individual
<code class="docutils literal notranslate"><span class="pre">report-0.txt</span></code>, <code class="docutils literal notranslate"><span class="pre">report-1.txt</span></code> etc. files for each rank in a
multi-process program.</p>
<p>Default: stdout</p>
</dd>
<dt>CALI_REPORT_CONFIG</dt><dd><p>A formatting specification in CalQL syntax (<a class="reference internal" href="calql.html"><span class="doc">The CalQL query language</span></a>).</p>
<p>Default: empty; all attributes in the snapshots will be printed.</p>
</dd>
</dl>
<p>Example: Consider the following report configuration and list of
flushed snapshots:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CALI_REPORT_CONFIG</span><span class="o">=</span><span class="s2">&quot;SELECT function,time.duration WHERE phase=loop ORDER BY time.duration FORMAT table&quot;</span>

<span class="n">phase</span><span class="o">=</span><span class="n">init</span><span class="p">,</span><span class="n">function</span><span class="o">=</span><span class="n">foo</span><span class="p">,</span><span class="n">time</span><span class="o">.</span><span class="n">duration</span><span class="o">=</span><span class="mi">42</span>
<span class="n">phase</span><span class="o">=</span><span class="n">loop</span><span class="p">,</span><span class="n">function</span><span class="o">=</span><span class="n">foo</span><span class="p">,</span><span class="n">time</span><span class="o">.</span><span class="n">duration</span><span class="o">=</span><span class="mi">2000</span>
<span class="n">phase</span><span class="o">=</span><span class="n">loop</span><span class="p">,</span><span class="n">function</span><span class="o">=</span><span class="n">bar</span><span class="p">,</span><span class="n">time</span><span class="o">.</span><span class="n">duration</span><span class="o">=</span><span class="mi">12</span>
<span class="n">phase</span><span class="o">=</span><span class="n">loop</span><span class="p">,</span><span class="n">function</span><span class="o">=</span><span class="n">foo</span><span class="p">,</span><span class="n">time</span><span class="o">.</span><span class="n">duration</span><span class="o">=</span><span class="mi">100</span>
</pre></div>
</div>
<p>This configuration will create the following report output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">function</span> <span class="n">time</span><span class="o">.</span><span class="n">duration</span>
<span class="n">bar</span>                 <span class="mi">12</span>
<span class="n">foo</span>                <span class="mi">100</span>
<span class="n">foo</span>               <span class="mi">2000</span>
</pre></div>
</div>
<p>Only snapshots where <code class="docutils literal notranslate"><span class="pre">phase=loop</span></code> are selected (due to the filter
configuration), and the <code class="docutils literal notranslate"><span class="pre">function</span></code> and <code class="docutils literal notranslate"><span class="pre">time.duration</span></code> attributes
are printed, in ascending order of <code class="docutils literal notranslate"><span class="pre">time.duration</span></code>.</p>
</section>
<section id="roctracer">
<h2>RocTracer<a class="headerlink" href="#roctracer" title="Link to this heading">¶</a></h2>
<p>The roctracer service records AMD ROCm/HIP activities and runtime
API calls.</p>
<p>The roctracer activity records contain the following attributes:</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>rocm.activity</p></td>
<td><p>Activity type (e.g., KernelExecution,
CopyHostToDevice, etc.)</p></td>
</tr>
<tr class="row-even"><td><p>rocm.starttime</p></td>
<td><p>Activity start time (ns)</p></td>
</tr>
<tr class="row-odd"><td><p>rocm.endtime</p></td>
<td><p>Activity end time (ns)</p></td>
</tr>
<tr class="row-even"><td><p>rocm.activity.duration</p></td>
<td><p>Activity duration (ns)</p></td>
</tr>
<tr class="row-odd"><td><p>rocm.activity.bytes</p></td>
<td><p>Bytes copied (for memory copies)</p></td>
</tr>
<tr class="row-even"><td><p>rocm.activity.queue</p></td>
<td><p>Queue ID</p></td>
</tr>
<tr class="row-odd"><td><p>rocm.activity.device</p></td>
<td><p>Device ID</p></td>
</tr>
<tr class="row-even"><td><p>rocm.kernel.name</p></td>
<td><p>Kernel function name</p></td>
</tr>
<tr class="row-odd"><td><p>rocm.host.duration</p></td>
<td><p>Duration of host activities (if
CALI_ROCTRACER_SNAPSHOT_DURATION is on)</p></td>
</tr>
</tbody>
</table>
<p>Variables:</p>
<dl>
<dt>CALI_ROCTRACER_TRACE_ACTIVITIES</dt><dd><p>Boolean. Enable activity tracing.</p>
<p>Default: true</p>
</dd>
<dt>CALI_ROCTRACER_RECORD_KERNEL_NAMES</dt><dd><p>Boolean. Record kernel function names in activity records.
Increases overheads.</p>
<p>Default: false</p>
</dd>
<dt>CALI_ROCTRACER_SNAPSHOT_DURATION</dt><dd><p>Boolean. Record duration of CPU activities (e.g., instead of
using the timestamp service).</p>
<p>Default: false</p>
</dd>
<dt>CALI_ROCTRACER_SNAPSHOT_TIMESTAMPS</dt><dd><p>Boolean. Record timestamps of CPU activities (e.g., instead of
using the timestamp service).</p>
<p>Default: false</p>
</dd>
</dl>
</section>
<section id="roctx">
<h2>RocTX<a class="headerlink" href="#roctx" title="Link to this heading">¶</a></h2>
<p>The RocTX service forwards Caliper annotations as ROCm RocTX
ranges for AMD’s rocprof tool.</p>
</section>
<section id="sampler">
<span id="sampler-service"></span><h2>Sampler<a class="headerlink" href="#sampler" title="Link to this heading">¶</a></h2>
<p>The sampler service implements time-based sampling. It triggers
snapshots at regular intervals. Sampling allows for low-overhead
performance data collection, and can provide insights into code
regions that are not or only sparsely covered with source-code
annotations.</p>
<p>Caliper must be initialized on each thread that should be
sampled. This can be done explicitly via the annotation API, or via
the <a class="reference internal" href="#pthread-service"><span class="std std-ref">pthread</span></a> service for child threads.</p>
<dl class="simple">
<dt>CALI_SAMPLER_FREQUENCY</dt><dd><p>Sampling frequency in Hz. Default: 10</p>
</dd>
</dl>
<p>When active, the sampler service regularly triggers snapshots with the
specified frequency. Each snapshot triggered by the sampler service
contains a <code class="docutils literal notranslate"><span class="pre">cali.sampler.pc</span></code> attribute with the program address
where the target program was interrupted. The symbollookup service can
use this to retrieve function name as well as source file and line
information.</p>
<p>The following example generates a sampling trace at 100Hz, uses the
symbollookup service to retrieve function name information, and prints
a flat profile of the number of samples per function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CALI_SERVICES_ENABLE</span><span class="o">=</span><span class="n">report</span><span class="p">,</span><span class="n">sampler</span><span class="p">,</span><span class="n">symbollookup</span><span class="p">,</span><span class="n">trace</span>
<span class="n">CALI_SAMPLER_FREQUENCY</span><span class="o">=</span><span class="mi">100</span>
<span class="n">CALI_REPORT_CONFIG</span><span class="o">=</span><span class="s2">&quot;SELECT source.function#cali.sampler.pc,count() GROUP BY source.function#cali.sampler.pc FORMAT table ORDER BY count DESC&quot;</span>
</pre></div>
</div>
</section>
<section id="symbollookup">
<span id="symbollookup-service"></span><h2>Symbollookup<a class="headerlink" href="#symbollookup" title="Link to this heading">¶</a></h2>
<p>The symbollookup service provides function name, source file, and
source line number lookup for binary program addresses from, e.g.,
stack unwinding or program counter sampling. The symbol lookup takes
place during snapshot buffer flushes. It appends symbol attributes for
each address attribute to the snapshots being flushed. For an address
attribute <code class="docutils literal notranslate"><span class="pre">address</span></code>, the function and file/line number will be
added in the <code class="docutils literal notranslate"><span class="pre">source.function#address</span></code> and <code class="docutils literal notranslate"><span class="pre">sourceloc#address</span></code>
attributes, respectively. If a symbol lookup
was unsuccessful for any reason, the value is set to <cite>UNKNOWN</cite>.</p>
<dl class="simple">
<dt>CALI_SYMBOLLOOKUP_ATTRIBUTES</dt><dd><p>Explicitly select address attributes for which to perform symbol
lookups. Colon-separated list. Default: empty, selects address
attributes automatically via <cite>class.symboladdress</cite> attribute class.</p>
</dd>
<dt>CALI_SYMBOLLOOKUP_LOOKUP_FUNCTIONS</dt><dd><p>Perform function name lookup. <cite>TRUE</cite> or <cite>FALSE</cite>, default <cite>TRUE</cite>.</p>
</dd>
<dt>CALI_SYMBOLLOOKUP_LOOKUP_SOURCELOC</dt><dd><p>Perform source file and line number lookup. <cite>TRUE</cite> or <cite>FALSE</cite>,
default <cite>TRUE</cite>. Combines file and line information in the
<code class="docutils literal notranslate"><span class="pre">sourceloc#address</span></code> attribute, e.g. <code class="docutils literal notranslate"><span class="pre">mysource.cpp:42</span></code> for file
“mysource.cpp” and line number 42.</p>
</dd>
<dt>CALI_SYMBOLLOOKUP_LOOKUP_FILE</dt><dd><p>Perform source file lookup, and writes the file name in the
<code class="docutils literal notranslate"><span class="pre">source.file#address</span></code> attribute. <cite>TRUE</cite> or <cite>FALSE</cite>,
default <cite>FALSE</cite>.</p>
</dd>
<dt>CALI_SYMBOLLOOKUP_LOOKUP_LINE</dt><dd><p>Perform source line lookup, and writes the line number in the
<code class="docutils literal notranslate"><span class="pre">source.line#address</span></code> attribute. <cite>TRUE</cite> or <cite>FALSE</cite>,
default <cite>FALSE</cite>.</p>
</dd>
<dt>CALI_SYMBOLLOOKUP_LOOKUP_MODULE</dt><dd><p>Perform module name lookup, and writes the module number in the
<code class="docutils literal notranslate"><span class="pre">module#address</span></code> attribute. <cite>TRUE</cite> or <cite>FALSE</cite>,
default <cite>FALSE</cite>.</p>
</dd>
</dl>
</section>
<section id="sysalloc">
<h2>Sysalloc<a class="headerlink" href="#sysalloc" title="Link to this heading">¶</a></h2>
<p>The sysalloc service wraps <cite>malloc</cite>, <cite>free</cite>, <cite>calloc</cite>, and <cite>realloc</cite>
memory allocation calls, and marks the allocated memory regions so
they can be tracked with the alloc service.</p>
</section>
<section id="textlog">
<h2>Textlog<a class="headerlink" href="#textlog" title="Link to this heading">¶</a></h2>
<p>The textlog service prints a text representation of snapshots to a configurable
output stream. This can be used to print out a log of the program’s
progress at runtime.</p>
<p>Currently, text log output can only be triggered by attribute update events.
Therefore, the <cite>event</cite> service must be active as well.
You can select which attribute updates trigger a text log output, define the
output format, and set the output stream (stdout, stderr, or a file name).</p>
<p>The following example prints a text log for the <cite>phase</cite> attribute of the
test application with Caliper’s auto-generated format string:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">CALI_SERVICES_ENABLE</span><span class="o">=</span>event:textlog:timestamp
$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">CALI_TEXTLOG_TRIGGER</span><span class="o">=</span>phase
$<span class="w"> </span>./test/cali-basic
<span class="o">==</span><span class="w"> </span>CALIPER:<span class="w"> </span>Registered<span class="w"> </span>event<span class="w"> </span>trigger<span class="w"> </span><span class="nv">service</span>
<span class="o">==</span><span class="w"> </span>CALIPER:<span class="w"> </span>Registered<span class="w"> </span>timestamp<span class="w"> </span><span class="nv">service</span>
<span class="o">==</span><span class="w"> </span>CALIPER:<span class="w"> </span>Registered<span class="w"> </span>text<span class="w"> </span>log<span class="w"> </span><span class="nv">service</span>
<span class="o">==</span><span class="w"> </span>CALIPER:<span class="w"> </span>Initialized
<span class="nv">phase</span><span class="o">=</span>main/init<span class="w">                                                       </span><span class="m">21</span>
<span class="nv">phase</span><span class="o">=</span>main/loop<span class="w">                                                       </span><span class="m">84</span>
<span class="nv">phase</span><span class="o">=</span>main<span class="w">                                                            </span><span class="nv">219</span>
<span class="o">==</span><span class="w"> </span>CALIPER:<span class="w"> </span>Finished
</pre></div>
</div>
<dl>
<dt>CALI_TEXTLOG_TRIGGER</dt><dd><p>Select attributes which trigger a text log output. Note that the <cite>event</cite>
service must be active in order to trigger snapshots in the first place,
and the attributes selected here must be in the list of attributes that
trigger snapshots (defined by <cite>CALI_EVENT_TRIGGER</cite>).</p>
</dd>
<dt>CALI_TEXTLOG_FORMATSTRING</dt><dd><p>Define what to print. The formatstring can contain fields, denoted by
<code class="docutils literal notranslate"><span class="pre">%attribute_name%</span></code>, which prints the value of an attribute. Optionally,
a field can contain a width specification, denoted by <code class="docutils literal notranslate"><span class="pre">[width]</span></code>, to set
the minimum width of a field. Any other text is printed verbatim.
For example, <code class="docutils literal notranslate"><span class="pre">Phase:</span> <span class="pre">%[32]app.phase%</span> <span class="pre">%[6]time.phase.duration%</span></code> writes
log strings with two fields: the value of the <cite>app.phase</cite> attribute with
a minimum width of 40 characters, and the value of  <cite>time.phase.duration</cite>
attribute with a minimum width of 6 characters, respectively. A resulting
log entry might look like this:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>Phase:<span class="w"> </span>main/loop<span class="w">                       </span><span class="m">7018</span>
</pre></div>
</div>
<p>Default: empty; Caliper will automatically create a format string based on
the selected trigger attributes.</p>
</dd>
<dt>CALI_TEXTLOG_FILENAME</dt><dd><p>File name for the text log. May be set to <code class="docutils literal notranslate"><span class="pre">stdout</span></code> or <code class="docutils literal notranslate"><span class="pre">stderr</span></code>
to print to the standard output or error streams, respectively.</p>
<p>Default: stdout</p>
</dd>
</dl>
</section>
<section id="timer">
<span id="timer-service"></span><h2>Timer<a class="headerlink" href="#timer" title="Link to this heading">¶</a></h2>
<p>The timer service adds a time offset, timestamp, or duration to
context records. Note that timestamps are <em>not</em> synchronized between
nodes in a distributed-memory program.</p>
<dl>
<dt>CALI_TIMER_INCLUSIVE_DURATION</dt><dd><p>Calulates inclusive times for nested regions. The value will be saved
in the snapshot record as attribute <code class="docutils literal notranslate"><span class="pre">time.inclusive.duration</span></code>.</p>
<p>The event service with event trigger information generation needs
to be enabled for this feature.</p>
<p>Default: true</p>
</dd>
</dl>
</section>
<section id="trace">
<span id="trace-service"></span><h2>Trace<a class="headerlink" href="#trace" title="Link to this heading">¶</a></h2>
<p>The trace service creates an I/O record for each snapshot. With the
<code class="docutils literal notranslate"><span class="pre">recorder</span></code> service enabled, this will create a snapshot trace file.</p>
<p>The trace service maintains per-thread snapshot buffers. By default,
trace buffers will grow automatically. This behavior can be changed by
setting a <em>buffer policy</em>. There are three options:</p>
<dl>
<dt>Grow</dt><dd><p>Grow the buffer when it is full. This is the default.</p>
</dd>
<dt>Stop</dt><dd><p>Stop recording when the buffer is full.</p>
</dd>
<dt>Flush</dt><dd><p>Flush the buffer when it is full and continue recording. Note that
buffer flushes can significantly perturb the program’s
performance.</p>
</dd>
<dt>CALI_TRACE_BUFFER_SIZE</dt><dd><p>Size of the trace buffer, in Megabytes. With the <cite>grow</cite> buffer
policy, this is the size of a trace buffer <em>chunk</em>: When the buffer
is full, another chunk of this size is added.</p>
<p>Default: 2 (MiB).</p>
</dd>
<dt>CALI_TRACE_BUFFER_POLICY</dt><dd><p>Sets the trace buffer policy (see above). Either <cite>grow</cite>, <cite>stop</cite>, or
<cite>flush</cite>.</p>
<p>Default: <cite>grow</cite>.</p>
</dd>
</dl>
</section>
<section id="umpire">
<h2>Umpire<a class="headerlink" href="#umpire" title="Link to this heading">¶</a></h2>
<p>The umpire service records statistics from the Umpire memory manager.
It provides the following attributes:</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>umpire.alloc.name</p></td>
<td><p>Umpire allocator name</p></td>
</tr>
<tr class="row-even"><td><p>umpire.alloc.actual.size</p></td>
<td><p>Actual size of the allocator</p></td>
</tr>
<tr class="row-odd"><td><p>umpire.alloc.current.size</p></td>
<td><p>Current size of the allocator</p></td>
</tr>
<tr class="row-even"><td><p>umpire.alloc.highwatermark</p></td>
<td><p>The memory high-watermark for the allocator</p></td>
</tr>
<tr class="row-odd"><td><p>umpire.alloc.count</p></td>
<td><p>Number of allocations in the allocator</p></td>
</tr>
<tr class="row-even"><td><p>umpire.total.size</p></td>
<td><p>Total memory allocated across all allocators</p></td>
</tr>
<tr class="row-odd"><td><p>umpire.total.count</p></td>
<td><p>Number of allocations across all allocators</p></td>
</tr>
</tbody>
</table>
<p>Variables:</p>
<dl>
<dt>CALI_UMPIRE_PER_ALLOCATOR_STATISTICS</dt><dd><p>Boolean. Record per-allocator statistics. If false, the umpire service
only records the <cite>umpire.total.size</cite> and <cite>umpire.total.count</cite> attributes,
otherwise it will create separate records for each Umpire allocator.</p>
<p>Default: true</p>
</dd>
</dl>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/caliper-logo-small.png" alt="Logo of Caliper"/>
            </a></p>
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Caliper services</a><ul>
<li><a class="reference internal" href="#aggregate">Aggregate</a><ul>
<li><a class="reference internal" href="#aggregation-key">Aggregation key</a></li>
<li><a class="reference internal" href="#aggregation-attributes">Aggregation attributes</a></li>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#alloc">Alloc</a></li>
<li><a class="reference internal" href="#callpath">Callpath</a></li>
<li><a class="reference internal" href="#cupti">CUpti</a><ul>
<li><a class="reference internal" href="#cupti-attributes">CUpti Attributes</a></li>
<li><a class="reference internal" href="#cupti-event-sampling-experimental">CUpti event sampling (EXPERIMENTAL)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cuptitrace">CUptiTrace</a></li>
<li><a class="reference internal" href="#environment-information">Environment Information</a></li>
<li><a class="reference internal" href="#event">Event</a><ul>
<li><a class="reference internal" href="#value-filtering">Value filtering</a></li>
<li><a class="reference internal" href="#config-variables">Config variables</a></li>
</ul>
</li>
<li><a class="reference internal" href="#debug">Debug</a></li>
<li><a class="reference internal" href="#io">IO</a></li>
<li><a class="reference internal" href="#libpfm">Libpfm</a></li>
<li><a class="reference internal" href="#mpi">MPI</a><ul>
<li><a class="reference internal" href="#mpi-message-tracing-experimental">MPI message tracing (EXPERIMENTAL)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mpi-report">MPI Report</a></li>
<li><a class="reference internal" href="#ompt">OMPT</a></li>
<li><a class="reference internal" href="#papi">PAPI</a></li>
<li><a class="reference internal" href="#pthread">Pthread</a></li>
<li><a class="reference internal" href="#recorder">Recorder</a></li>
<li><a class="reference internal" href="#report">Report</a></li>
<li><a class="reference internal" href="#roctracer">RocTracer</a></li>
<li><a class="reference internal" href="#roctx">RocTX</a></li>
<li><a class="reference internal" href="#sampler">Sampler</a></li>
<li><a class="reference internal" href="#symbollookup">Symbollookup</a></li>
<li><a class="reference internal" href="#sysalloc">Sysalloc</a></li>
<li><a class="reference internal" href="#textlog">Textlog</a></li>
<li><a class="reference internal" href="#timer">Timer</a></li>
<li><a class="reference internal" href="#trace">Trace</a></li>
<li><a class="reference internal" href="#umpire">Umpire</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="workflow.html"
                          title="previous chapter">Architecture and workflow</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="calql.html"
                          title="next chapter">The CalQL query language</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/services.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="calql.html" title="The CalQL query language"
             >next</a> |</li>
        <li class="right" >
          <a href="workflow.html" title="Architecture and workflow"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Caliper 2.12.1 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Caliper services</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2015-2021, Lawrence Livermore National Laboratory.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    </div>
  </body>
</html>