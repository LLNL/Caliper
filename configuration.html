<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Manual configuration &#8212; Caliper 2.10.0-dev documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b76e3c8a" />
    <link rel="stylesheet" type="text/css" href="_static/classic.css?v=89b800e6" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=355e25cc"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Architecture and workflow" href="workflow.html" />
    <link rel="prev" title="Built-in profiling configurations" href="BuiltinConfigurations.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="workflow.html" title="Architecture and workflow"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="BuiltinConfigurations.html" title="Built-in profiling configurations"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Caliper 2.10.0-dev documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Manual configuration</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="manual-configuration">
<h1>Manual configuration<a class="headerlink" href="#manual-configuration" title="Permalink to this heading">¶</a></h1>
<p>When not using built-in performance measurement configurations (<a class="reference internal" href="BuiltinConfigurations.html"><span class="doc">Built-in profiling configurations</span></a>),
through the ConfigManager API or the <cite>CALI_CONFIG</cite> environment variable,
Caliper can be configured manually by setting configuration
variables through the environment or configuration files.</p>
<p>Configuration variables have the form</p>
<blockquote>
<div><p>CALI_&lt;MODULE&gt;_&lt;KEY&gt;=&lt;VALUE&gt;</p>
</div></blockquote>
<p>Values can be strings, lists, numbers, or boolean values, depending on
the variable. List elements are typically separated by commas.
Boolean values can be given as ‘1’, ‘true’, or ‘0’, ‘false’
for <em>true</em> and <em>false</em>, respectively.</p>
<p>Generally, configuring Caliper requires selecting a set of <em>services</em>,
which implement Caliper’s measurement functionality.
Refer to <a class="reference internal" href="workflow.html"><span class="doc">Architecture and workflow</span></a> to learn how services can be combined to
form a complete measurement, data collection, and output pipeline.
Select services with CALI_SERVICES_ENABLE configuration variable,
for example by setting it as an environment variable:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">CALI_SERVICES_ENABLE</span><span class="o">=</span>event,trace,recorder,timestamp
</pre></div>
</div>
<p>Many services have additional configuration variables. See <a class="reference internal" href="services.html"><span class="doc">Caliper services</span></a>
for a complete list of available services and their configuration.</p>
<section id="configuration-files">
<h2>Configuration files<a class="headerlink" href="#configuration-files" title="Permalink to this heading">¶</a></h2>
<p>Configuration variables can be put in configuration files. By default,
Caliper reads the file <cite>caliper.config</cite> in the current working
directory, if present. Alternatively, you can provide a list of
configuration files with the CALI_CONFIG_FILE variable. Note that
CALI_CONFIG_FILE can only be set through an environment variable.</p>
<p>The configuration files use a simple <cite>&lt;VARIABLE&gt;=&lt;VALUE&gt;</cite>
syntax. Lines starting with <cite>#</cite> are interpreted as comments.
Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># My configuration</span>
<span class="n">CALI_SERVICES_ENABLE</span><span class="o">=</span><span class="n">event</span><span class="p">,</span><span class="n">recorder</span><span class="p">,</span><span class="n">timestamp</span><span class="p">:</span><span class="n">mpi</span>
<span class="n">CALI_MPI_WHITELIST</span><span class="o">=</span><span class="n">MPI_Allreduce</span><span class="p">,</span><span class="n">MPI_Barrier</span>
<span class="n">CALI_TIMER_TIMESTAMP</span><span class="o">=</span><span class="n">true</span>
</pre></div>
</div>
<p>When multiple definitions of the same variable are given, the last
definition is taken. When multiple configuration files are provided,
they are processed in the order they are given. Values set through
environment variables override values given in configuration files.</p>
</section>
<section id="configuration-profiles">
<h2>Configuration profiles<a class="headerlink" href="#configuration-profiles" title="Permalink to this heading">¶</a></h2>
<p>Configuration profiles allow you to put multiple Caliper
configurations into a file and select one of them with a single
switch. You can declare a profile in a configuration file with <code class="docutils literal notranslate"><span class="pre">#</span>
<span class="pre">[profile</span> <span class="pre">name]</span></code>. The following lines up to the next profile
declaration then belong to this profile. Entries that do not belong to
any specific profile are inserted into the default profile. Caliper
will use the profile given by the <cite>CALI_CONFIG_PROFILE</cite> variable, or
the default profile if none is set.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CALI_CONFIG_PROFILE</span><span class="o">=</span><span class="n">callstack</span><span class="o">-</span><span class="n">trace</span>

<span class="c1"># [callstack-trace]</span>
<span class="c1"># A trace with call-path info</span>
<span class="n">CALI_SERVICES_ENABLE</span><span class="o">=</span><span class="n">callpath</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">recorder</span><span class="p">,</span><span class="n">timestamp</span>
<span class="n">CALI_CALLPATH_USE_NAME</span><span class="o">=</span><span class="n">true</span>

<span class="c1"># [hwc-trace]</span>
<span class="c1"># A trace with PAPI hardware counters</span>
<span class="n">CALI_SERVICES_ENABLE</span><span class="o">=</span><span class="n">event</span><span class="p">,</span><span class="n">papi</span><span class="p">,</span><span class="n">recorder</span><span class="p">,</span><span class="n">timestamp</span>
<span class="n">CALI_PAPI_COUNTERS</span><span class="o">=</span><span class="n">PAPI_FP_OPS</span>
</pre></div>
</div>
<p>This file defines two configuration profiles, <em>callstack-trace</em> and
<em>hwc-trace</em>, and selects the callstack-trace profile. You can override
the profile selection by setting a different value in the
<cite>CALI_CONFIG_PROFILE</cite> environment variable. Note that environment
variables always override values set in a configuration file,
regardless of the selected profile.</p>
</section>
<section id="configuration-variables-reference">
<h2>Configuration variables reference<a class="headerlink" href="#configuration-variables-reference" title="Permalink to this heading">¶</a></h2>
<p>This section describes the configuration variables of the Caliper
runtime system.</p>
<p>Many Caliper services define additional configuration variables. See
<a class="reference internal" href="services.html"><span class="doc">Caliper services</span></a> for a list of Caliper services and their
configuration.</p>
<section id="environment-variables">
<h3>Environment variables<a class="headerlink" href="#environment-variables" title="Permalink to this heading">¶</a></h3>
<p>These variables can only be set as environment variables.</p>
<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-CALI_CONFIG">
<span class="sig-name descname"><span class="pre">CALI_CONFIG</span></span><a class="headerlink" href="#envvar-CALI_CONFIG" title="Permalink to this definition">¶</a></dt>
<dd><p>A configuration string to enable one (or more) of Caliper’s built-in
performance profiling configurations. See <a class="reference internal" href="BuiltinConfigurations.html"><span class="doc">Built-in profiling configurations</span></a>.</p>
</dd></dl>

<dl class="std envvar">
<dt class="sig sig-object std" id="envvar-CALI_USE_OMPT">
<span class="sig-name descname"><span class="pre">CALI_USE_OMPT</span></span><a class="headerlink" href="#envvar-CALI_USE_OMPT" title="Permalink to this definition">¶</a></dt>
<dd><p>Set to “1” or “true” to activate the OpenMP tools interface in the OpenMP
runtime. This is required for the ompt service. It is only necessary to set
this if the OpenMP runtime is first initialized before the ompt service is
initialized, otherwise the <cite>ompt</cite> service will activate the OpenMP tools
interface automatically. When set to “0” or “false” Caliper will not use
the OpenMP tools interface. See <a class="reference internal" href="services.html#ompt-service"><span class="std std-ref">ompt</span></a></p>
</dd></dl>

</section>
<section id="configuration-variables">
<h3>Configuration variables<a class="headerlink" href="#configuration-variables" title="Permalink to this heading">¶</a></h3>
<p>These variables can be set using environment variables, config files,
or the configuration API.</p>
<dl>
<dt>CALI_CONFIG_FILE</dt><dd><p>Comma-separated list of configuration files. The provided
configuration files are read in order. Note: this variable can only
be set as an environment variable or through the configuration API.</p>
<p>Default: <code class="docutils literal notranslate"><span class="pre">caliper.config</span></code></p>
</dd>
<dt>CALI_SERVICES_ENABLE</dt><dd><p>Comma-separated list of Caliper service modules to enable.</p>
<p>Default: Not set. Caliper will not record performance data.</p>
</dd>
<dt>CALI_LOG_VERBOSITY</dt><dd><div class="line-block">
<div class="line">Verbosity level. Default: 1</div>
<div class="line-block">
<div class="line">0: No output except for severe errors.</div>
<div class="line">1: Basic informational runtime output and warning messages.</div>
<div class="line">2: Debug output. Shows e.g. memory usage of context trees,</div>
<div class="line">trace buffers, and aggregation database.</div>
<div class="line">3: More debug output. Shows configuration settings.</div>
</div>
</div>
</dd>
<dt>CALI_LOG_LOGFILE</dt><dd><p>Log file name, or ‘stdout’/’stderr’ for streaming to standard out or
standard error, respectively. Default: stderr</p>
</dd>
<dt>CALI_CHANNEL_CONFIG_CHECK</dt><dd><p>Perform basic configuration sanity checks. Caliper prints warnings
for incomplete configurations, e.g., if a snapshot trigger service
is enabled but no output service.</p>
<p>Default: enabled (<code class="docutils literal notranslate"><span class="pre">true</span></code>)</p>
</dd>
</dl>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/caliper-logo-small.png" alt="Logo"/>
            </a></p>
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Manual configuration</a><ul>
<li><a class="reference internal" href="#configuration-files">Configuration files</a></li>
<li><a class="reference internal" href="#configuration-profiles">Configuration profiles</a></li>
<li><a class="reference internal" href="#configuration-variables-reference">Configuration variables reference</a><ul>
<li><a class="reference internal" href="#environment-variables">Environment variables</a></li>
<li><a class="reference internal" href="#configuration-variables">Configuration variables</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="BuiltinConfigurations.html"
                          title="previous chapter">Built-in profiling configurations</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="workflow.html"
                          title="next chapter">Architecture and workflow</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/configuration.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="workflow.html" title="Architecture and workflow"
             >next</a> |</li>
        <li class="right" >
          <a href="BuiltinConfigurations.html" title="Built-in profiling configurations"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Caliper 2.10.0-dev documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Manual configuration</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2015-2021, Lawrence Livermore National Laboratory.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.1.2.
    </div>
  </body>
</html>